<OperationDefinition xmlns="http://hl7.org/fhir">
    <id value="prescription-release"></id>
    <meta>
        <lastUpdated value="2022-10-17T11:39:00+00:00"></lastUpdated>
    </meta>
    <url value="https://fhir.nhs.uk/OperationDefinition/prescription-release"></url>
    <version value="4.0.1"></version>
    <name value="PrescriptionRelease"></name>
    <status value="draft"></status>
    <kind value="operation"></kind>
    <date value="2022-10-17T11:39:00+00:00"></date>
    <publisher value="NHS Digital"></publisher>
    <contact>
        <telecom>
            <system value="email"></system>
            <value value="interoperabilityteam@nhs.net"></value>
        </telecom>
    </contact>
    <description value="Use this operation to download prescriptions from Spine before it is dispensed. You can download a single prescription using the prescription's ID, or download up to 25 prescriptions (per request) nominated to a dispenser using the dispenser's ODS code. The operation will return prescriptions passing signature validation as a collection of Prescription-Order bundles and/or error messages for Prescriptions failing signature validation as a collection of OperationOutcome resources (with the prescription-order messages attached as supportingInfo"></description>
    <code value="release"></code>
    <comment value="Only one of the parameters group-identifier and owner MUST be provided. This operation performs both a query on the message queue and updates the status of returned prescriptions."></comment>
    <resource value="Task"></resource>
    <affectsState value="true" />
    <system value="false"></system>
    <type value="true"></type>
    <instance value="false"></instance>
    <outputProfile value="https://fhir.nhs.uk/StructureDefinition/NHSDigital-Bundle-Collection"/>
    <parameter>
        <name value="group-identifier"></name>
        <use value="in"></use>
        <min value="0"></min>
        <max value="1"></max>
        <documentation value="The short-form-prescription-id (token) of the prescription. Used for releasing Patient prescriptions"></documentation>
        <type value="Identifier"></type>
    </parameter>
    <parameter>
        <name value="owner"></name>
        <use value="in"></use>
        <min value="1"></min>
        <max value="1"></max>
        <documentation value="The organization (pharmacy) downloading the prescriptions. Used for releasing Nominated Pharmacy prescriptions"></documentation>
        <type value="Organization"></type>
    </parameter>
    <parameter>
        <name value="status"></name>
        <use value="in"></use>
        <min value="1"></min>
        <max value="1"></max>
        <documentation value="Status from ValueSet http://hl7.org/fhir/valueset-task-status.html Use: accepted"></documentation>
        <type value="code"></type>
    </parameter>
    <parameter>
        <name value="agent"></name>
        <use value="in"></use>
        <min value="1"></min>
        <max value="1"></max>
        <documentation value="The professional submitting the release request"></documentation>
        <type value="PractitionerRole"></type>
    </parameter>
    <parameter>
        <name value="passedPrescriptions"></name>
        <use value="out"></use>
        <min value="1"></min>
        <max value="1"></max>
        <documentation value="A FHIR Bundle (type=collection) which contains prescription-order FHIR Messages which match the search parameters. An empty search will still return a FHIR Bundle but with no entries."></documentation>
        <type value="Bundle"></type>
    </parameter>
    <parameter>
        <name value="failedPrescriptions"></name>
        <use value="out"></use>
        <min value="0"></min>
        <max value="1"></max>
        <documentation value="A FHIR Bundle (type=collection) which contains OperationOutcome resources for each Prescription failing signature verification which matches the search parameters."></documentation>
        <type value="Bundle"></type>
    </parameter>
</OperationDefinition>